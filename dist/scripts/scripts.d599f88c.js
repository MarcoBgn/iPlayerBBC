"use strict";var iPlayerApp=angular.module("iPlayerApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]);iPlayerApp.controller("MainCtrl",["ProgrammesList",function(a){var b=this;a.getList().then(function(a){b.listData=a})}]),iPlayerApp.controller("AboutCtrl",function(){}),iPlayerApp.controller("PagerController",["$window","PageInfo","$anchorScroll",function(a,b,c){var d=this;b.getList().then(function(a){d.info=a}),d.pageChange=function(){sessionStorage.setItem("page",d.info.page),a.location.reload(),c()}}]),iPlayerApp.controller("LettersController",["PageInfo","$window",function(a,b){var c=this;a.getList().then(function(a){c.info=a}),c.letterChange=function(a){sessionStorage.setItem("character",a),b.location.reload()}}]),iPlayerApp.factory("ProgrammesList",["$http",function(a){var b=this,c={};return b.page=sessionStorage.getItem("page")||1,b.letter=sessionStorage.getItem("character")||"a",c.getList=function(){return a.get("https://ibl.api.bbci.co.uk/ibl/v1/atoz/"+b.letter+"/programmes?page="+b.page).then(function(a){var b,c,d=[],e=[],f=[];b=a.data.atoz_programmes,c="http://ichef.bbci.co.uk/images/ic/192x108/";for(var g=0;g<b.elements.length;g++)d.push(b.elements[g].images.standard.substr(43));for(g=0;g<d.length;g++)e.push(c+d[g]);for(g=0;g<b.elements.length;g++)f.push([b.elements[g],e[g]]);return f})},c}]),iPlayerApp.factory("PageInfo",["$http",function(a){var b=this,c={};return b.page=sessionStorage.getItem("page")||1,b.letter=sessionStorage.getItem("character")||"a",c.getList=function(){return a.get("https://ibl.api.bbci.co.uk/ibl/v1/atoz/"+b.letter+"/programmes?page="+b.page).then(function(a){var b;return b=a.data.atoz_programmes})},c}]),angular.module("iPlayerApp").run(["$templateCache",function(a){a.put("views/about.html",'<p>Totally unbiased tech test.</p> <p><a class="btn btn-lg btn-success" ng-href="#/">Back!<span class="glyphicon glyphicon-ok"></span></a></p>'),a.put("views/main.html",'<div class="jumbotron"> <h1>Welcome to iPlayer Programme List</h1> <div> <input placeholder="filter your search..." ng-model="query"> </div> <ul ng-repeat="item in main.listData | filter:query"> <li> <div class="programme"> <h4>{{item[0].title}}</h4><span><img class="programme_img" id="{{item[0].id}}" ng-src="{{item[1]}}"></span> </div> </li> </ul> <div class="pagination" ng-controller="PagerController as pager"> <uib-pagination class="pagination_bar" items-per-page="20" total-items="pager.info.count" ng-model="pager.info.page" ng-change="pager.pageChange()"></uib-pagination> </div> </div>')}]);